<!DOCTYPE html>
<html>

<head>
  <title>BOOKY</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="mycss.css">
  <link rel="stylesheet" type="text/css" href="slick/slick.css" />
  <link rel="stylesheet" type="text/css" href="slick/slick-theme.css" />

  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>

<body>

  <!--Nav bar-->
  <nav class="navbar navbar-inverse">
    <div class="container-fluid">
      <div class="navbar-header">
        <a class="navbar-brand" href="index.html">BOOKY</a>
      </div>
      <ul class="nav navbar-nav">
        <li><a href="index.html">Home</a></li>
        <li class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">Category <span class="caret"></span></a>
          <ul class="dropdown-menu">
            <li><a href="category.html">Action</a></li>
            <li><a href="category.html">Biography and Memoir</a></li>
            <li><a href="category.html">Cookbooks</a></li>
            <li><a href="category.html">Dance</a></li>
            <li><a href="category.html">Entertainment</a></li>
            <li><a href="category.html">Family</a></li>
            <li><a href="category.html">Fiction and Literature</a></li>
            <li><a href="category.html">Mystery and Suspense</a></li>
            <li><a href="category.html">Religion and Spirituality</a></li>
            <li><a href="category.html">Romance</a></li>
            <li><a href="category.html">Sports</a></li>
            <li><a href="category.html">Travel</a></li>
          </ul>
        </li>
      </ul>
      <form class="navbar-form navbar-left">
       <div class="input-group">
         <input type="text" class="form-control" placeholder="Search" id="nav-search">
         <div class="input-group-btn">
           <button class="btn btn-default nav-search" type="button">
             <i class="glyphicon glyphicon-search"></i>
           </button>
         </div>
       </div>
     </form>
      <ul class="nav navbar-nav navbar-right">
        <li class="active"><a href="shopping-cart.html"><span class="glyphicon glyphicon-shopping-cart"></span>
          <span class="badge">0</span> Shopping Cart</a></li>
      </ul>
    </div>
  </nav>

  <div class="col-lg-2"></div>

  <!--Start of the shopping cart -->
  <div class="container-fluid">
    <div class="row">

      <!--Cart items container -->
      <div class="col-lg-6">
        <h2>Payment Method</h2>

        <!--Forms to fill in at checkout-->
        <form id="payment-info">

          <div class="form-group">
            <label for="payment-option">Select payment option: </label>
            <select name="format" style="height: 50px" id="format-type">
                <option value="1">Visa</option>
                <option value="2">Paypal</option>
                <option value="3">Mastercard</option>
                <option value="4">American Express</option>
            </select>
          </div>
          <div class="form-group">
            <label for="card-number">Card number: </label>
            <input type="number" class="form-control" id="card-number" required/>
          </div>

          <div class="form-group">
            <label for="expiration-date">Expiration date: </label>
            <input type="date" class="form-control" id="expiration-date" required/>
          </div>
          <div class="form-group">
            <label for="security-code">Security code: </label>
            <input type="number" class="form-control" id="security-code" required/>
          </div>

          <!-- The Modal -->
          <div id="myModal" class="modal">

            <!-- Modal content -->
            <div class="modal-content">
              <span class="close">&times;</span>
              <p></p>
            </div>

          </div>
      </div>


      <!--This is where the prices are displayed -->
      <div class="col-lg-4 summary-container">
        <h2>Order Summary</h2>
        <div class="order-summary">
          <ul class="list-group summary-prices">
            <li class="list-group-item">
              <span class="summary-left">Subtotal (3 items)</span> <span class="summary-right">$59.97</span>
            </li>
            <li class="list-group-item">
              <span class="summary-left">Estimated Shipping</span> <span class="summary-right">Free</span>
            </li>
            <li class="list-group-item" id="last-li">
              <span class="summary-left">Estimated Tex</span> <span class="summary-right">$7.80</span>
            </li>
          </ul>
          <div class="total">
            <span class="summary-left"><h3>Order Total</h3></span> <span class="summary-right">$67.77</span>
          </div>
          <div class="space-medium"></div>
          <button type="submit" form="payment-info" class="btn btn-primary btn-block">Checkout</button>
        </div>
      </div>
    </div>
  </div>





  <!-- Latest compiled JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script type="text/javascript" src="slick/slick.min.js"></script>

  <!-- Validate the forms and mark those that are wrong -->
  <script>

    var span = document.getElementsByClassName("close")[0];
    var modal = document.getElementById('myModal');

    $(".btn-block").click(function(){
      var cardNumber = $("#card-number").val();
      var securityCode = $("#security-code").val();
      var regexCN = new RegExp(/^\d{16}$/i);
      var regexSC = new RegExp(/^\d{3}$/i);

      if(regexSC.test(securityCode) && regexCN.test(cardNumber)) {
        alert("Succesfully bought books");
        window.location.href = "index.html";
      }

      else if (!regexCN.test(cardNumber)) {
        $(".modal-content p").text("Card number must be 16 digits long");
        modal.style.display = "block";
        $("#payment-info").submit(function(e) {
          e.preventDefault();
        });
      } else if (!regexSC.test(securityCode)) {
        $(".modal-content p").text("Security code must be 3 digits long");
        modal.style.display = "block";
        $("#payment-info").submit(function(e) {
          e.preventDefault();
        });
      }

    });

    // When the user clicks on <span> (x), close the modal
    span.onclick = function() {
      modal.style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
      if (event.target == modal) {
        modal.style.display = "none";
      }
    }
  </script>

  <!-- Search button directs to search page -->
  <script>
    $(".nav-search").click(function(){
      if($("#nav-search").val() == "") {
        $("#nav-search-form").submit(function(e){
          e.preventDefault();
        });
      } else
          window.location.href = "search-page.html"
    });
  </script>
  
</body>
</html>
